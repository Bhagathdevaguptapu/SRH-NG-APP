<div class="ticket-detail-container">
  <h2>Department Ticket Actions</h2>
<img src="https://assets.upstox.com/content/assets/images/cms/2024314/coforge.webp" alt="Logo" class="top-right-logo" />
  <div class="form-group">
    <label for="deptId">Department ID:</label>
    <input type="number" id="deptId" [(ngModel)]="departmentId" />
    <button (click)="fetchTickets()">Load Tickets</button>
  </div>

  <p class="loading" *ngIf="loading">Loading...</p>
  <p class="success" *ngIf="successMsg">{{ successMsg }}</p>
  <p class="error" *ngIf="errorMsg">{{ errorMsg }}</p>

  <div class="tickets-list" *ngIf="tickets.length > 0">
    <div class="ticket-card" *ngFor="let ticket of tickets">
      <div class="ticket-info">
        <div><strong>ID:</strong> {{ ticket.ticketId }}</div>
        <div><strong>Status:</strong> <span class="status {{ ticket.status | lowercase }}">{{ ticket.status }}</span></div>
        <div><strong>Description:</strong> {{ ticket.description }}</div>
        <div><strong>Created:</strong> {{ ticket.createdAt | date: 'short' }}</div>
        <div><strong>Updated:</strong> {{ ticket.updatedAt | date: 'short' }}</div>
      </div>
      <div class="ticket-actions" *ngIf="ticket.status !== 'CLOSED' && ticket.status !== 'closed'">
        <button *ngIf="ticket.status === 'ASSIGNED'" class="accept-btn" (click)="acceptTicket(ticket.ticketId)">Accept</button>
        <button class="close-btn" (click)="closeTicket(ticket.ticketId)">Close</button>
      </div>

    </div>
  </div>
</div>

<a class="back-arrow" href="/">← Back</a>
<footer>
  <p>© 2025 Department Ticketing System | Version 1.0</p>
</footer>
